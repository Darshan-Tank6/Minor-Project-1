<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Student Profile</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
  </head>
  <body>
    <div class="container mt-5">
      <h2 class="mb-4">Student Profile</h2>

      <% if (student) { %>
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title"><%= student.userId.name %></h5>
          <p class="card-text">
            <strong>Email:</strong> <%= student.userId.email %>
          </p>
          <p class="card-text">
            <strong>Roll Number:</strong> <%= student.rollNumber %>
          </p>
          <p class="card-text">
            <strong>Department:</strong> <%= student.departmentId.name %>
          </p>
          <p class="card-text">
            <strong>Class:</strong> <%= student.classId.name %>
          </p>
          <p class="card-text"><strong>Year:</strong> <%= student.year %></p>
          <p class="card-text">
            <strong>Division:</strong> <%= student.division %>
          </p>
        </div>
      </div>

      <% if (student.classId.subjects && student.classId.subjects.length > 0) {
      %>
      <h4>Subjects</h4>

      <% student.classId.subjects.forEach(subject => { %>
      <div class="card mb-3">
        <div class="card-header">
          <strong><%= subject.name %></strong>
        </div>
        <div class="card-body">
          <% if (subject.teachingProfId) { %>
          <p>
            <strong>Teaching Professor:</strong> <%= subject.teachingProfId.name
            %> (<%= subject.teachingProfId.email %>)
          </p>
          <% } %> <% if (subject.assistantProfId) { %>
          <p>
            <strong>Assistant Professor:</strong> <%=
            subject.assistantProfId.name %> (<%= subject.assistantProfId.email
            %>)
          </p>
          <% } %> <% if (subject.schedule && subject.schedule.length > 0) { %>
          <h6>Schedule</h6>
          <ul class="list-group mb-3">
            <% subject.schedule.forEach(slot => { %>
            <li class="list-group-item">
              <strong><%= slot.day %>:</strong> <%= slot.startTime %> to <%=
              slot.endTime %> in <%= slot.room %>
            </li>
            <% }); %>
          </ul>
          <% } %> <% if (subject.chapters && subject.chapters.length > 0) { %>
          <h6>Chapters</h6>
          <ul class="list-group">
            <% subject.chapters.forEach(chapter => { %>
            <li class="list-group-item">
              <strong
                >Chapter <%= chapter.number %>: <%= chapter.title %></strong
              >
              <% if (chapter.topics && chapter.topics.length > 0) { %>
              <ul>
                <% chapter.topics.forEach(topic => { %>
                <li><%= topic %></li>
                <% }); %>
              </ul>
              <% } %>
            </li>
            <% }); %>
          </ul>
          <% } %>
        </div>
      </div>
      <% }); %> <% } else { %>
      <p>No subjects found for your class.</p>
      <% } %> <% } else { %>
      <div class="alert alert-danger">Student profile not found.</div>
      <% } %>

      <a href="/" class="btn btn-secondary mt-3">Back to Home</a>
    </div>
  </body>
</html>
